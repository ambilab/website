---
import { ICON_MAP, type IconName } from '@config/icons';

interface Props {
    name: IconName;
    class?: string;
    decorative?: boolean;
    ariaLabel?: string;
}

const { name, class: className = '', decorative = true, ariaLabel } = Astro.props as Props;

const svgContent = ICON_MAP[name];

if (!svgContent) {
    throw new Error(`Icon "${name}" not found. Available icons: ${Object.keys(ICON_MAP).join(', ')}`);
}

if (!decorative && !ariaLabel) {
    throw new Error(`Icon "${name}" must have ariaLabel when decorative={false}`);
}
---

<span
    class={className}
    aria-hidden={decorative && !ariaLabel ? 'true' : undefined}
    aria-label={ariaLabel}
    role={ariaLabel ? 'img' : undefined}
    set:html={svgContent}
/>
